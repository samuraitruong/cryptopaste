env:
  - REACT_APP_WEB_API_URL=https://23cmp7wdc4.execute-api.ap-southeast-2.amazonaws.com/dev
  # This is the DEV enpoint for all CI Branch
language: node_js
node_js:
  - "stable"
cache:
  directories:
  - node_modules
# Handle git submodules yourself
git:
    submodules: false
# Use sed to replace the SSH URL with the public URL, then initialize submodules
#before_install:
#    - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
#    - git submodule update --init --recursive
script:
# - cd test-app
  - yarn
  - yarn test 
  - yarn build
deploy:
  provider: pages
  all_branches: true
  skip_cleanup: true
  target_branch: ci-gh-pages
  github_token: $GITHUB_TOKEN
  local_dir: build
  commit_message: '[ci skip] published by TravisCI'
  on:
  #  branch: master
    all_branches: true